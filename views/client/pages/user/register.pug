extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main 
    +alert-success(5000)
    +alert-error(5000) 

    // Auth Section
    section.auth-section.min-vh-100.d-flex.align-items-center.py-5
        .container
            .row.justify-content-center
                .col-lg-6.col-md-8.col-sm-10
                    .auth-card.bg-white.rounded-4.shadow-lg.overflow-hidden
                        // Header with gradient
                        .auth-header.bg-success.text-white.text-center.py-5
                            .auth-icon.mb-3
                                i.fas.fa-user-plus.fa-3x.opacity-75
                            h2.auth-title.fw-bold.mb-2 Đăng ký tài khoản
                            p.auth-subtitle.mb-0.opacity-75 Tạo tài khoản mới để bắt đầu!

                        // Form Body
                        .auth-body.p-5
                            form.auth-form(action="/user/register", method="POST")
                                // Full Name Field
                                .form-group.mb-4
                                    .form-floating
                                        input.form-control.form-control-lg.border-2(
                                            type="text"
                                            id="fullName"
                                            name="fullName"
                                            placeholder="Nhập họ và tên"
                                            required
                                        )
                                        label.text-muted(for="fullName")
                                            i.fas.fa-user.me-2
                                            | Họ và tên

                                // Email Field
                                .form-group.mb-4
                                    .form-floating
                                        input.form-control.form-control-lg.border-2(
                                            type="email"
                                            id="email"
                                            name="email"
                                            placeholder="Nhập email của bạn"
                                            required
                                        )
                                        label.text-muted(for="email")
                                            i.fas.fa-envelope.me-2
                                            | Email

                                // Password Field
                                .form-group.mb-4
                                    .form-floating.position-relative
                                        input.form-control.form-control-lg.border-2(
                                            type="password"
                                            id="password"
                                            name="password"
                                            placeholder="Nhập mật khẩu"
                                            required
                                            minlength="6"
                                        )
                                        label.text-muted(for="password")
                                            i.fas.fa-lock.me-2
                                            | Mật khẩu
                                        button.btn.btn-link.position-absolute.end-0.top-50.translate-middle-y.me-3.p-0.border-0.bg-transparent(
                                            type="button"
                                            onclick="togglePassword('password')"
                                        )
                                            i.fas.fa-eye.text-muted
                                    .form-text.text-muted.small
                                        i.fas.fa-info-circle.me-1
                                        | Mật khẩu phải có ít nhất 6 ký tự

                                // Confirm Password Field
                                .form-group.mb-4
                                    .form-floating.position-relative
                                        input.form-control.form-control-lg.border-2(
                                            type="password"
                                            id="confirmPassword"
                                            name="confirmPassword"
                                            placeholder="Xác nhận mật khẩu"
                                            required
                                        )
                                        label.text-muted(for="confirmPassword")
                                            i.fas.fa-lock.me-2
                                            | Xác nhận mật khẩu
                                        button.btn.btn-link.position-absolute.end-0.top-50.translate-middle-y.me-3.p-0.border-0.bg-transparent(
                                            type="button"
                                            onclick="togglePassword('confirmPassword')"
                                        )
                                            i.fas.fa-eye.text-muted

                                // Terms & Conditions
                                .form-group.mb-4
                                    .form-check
                                        input.form-check-input(type="checkbox", id="terms", required)
                                        label.form-check-label.text-muted(for="terms")
                                            | Tôi đồng ý với 
                                            a.text-decoration-none.fw-semibold(href="#") Điều khoản dịch vụ
                                            |  và 
                                            a.text-decoration-none.fw-semibold(href="#") Chính sách bảo mật

                                // Submit Button
                                .form-group.mb-4
                                    button.btn.btn-success.btn-lg.w-100.fw-bold.py-3.rounded-3(type="submit")
                                        i.fas.fa-user-plus.me-2
                                        | Đăng ký tài khoản

                                // Divider
                                .divider.my-4
                                    .divider-line
                                    .divider-text.bg-white.px-3.text-muted hoặc
                                    .divider-line

                                // Social Register (Optional)
                                .social-login.mb-4
                                    .row.g-2
                                        .col-6
                                            button.btn.btn-outline-primary.w-100.py-2(type="button")
                                                i.fab.fa-facebook-f.me-2
                                                | Facebook
                                        .col-6
                                            button.btn.btn-outline-danger.w-100.py-2(type="button")
                                                i.fab.fa-google.me-2
                                                | Google

                                // Login Link
                                .text-center
                                    span.text-muted Đã có tài khoản? 
                                    a.login-link.text-decoration-none.fw-bold(href="/user/login") Đăng nhập ngay

    // Custom JavaScript
    script.
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const icon = event.target;
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                field.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Password confirmation validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            
            if (password !== confirmPassword) {
                this.setCustomValidity('Mật khẩu xác nhận không khớp');
            } else {
                this.setCustomValidity('');
            }
        });
